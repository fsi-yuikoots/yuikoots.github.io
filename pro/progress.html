<html>
<head>
	<meta charset="UTF-8">
	<title>progress</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
		if ('serviceWorker' in navigator) {
	    // Service Worker
	    navigator.serviceWorker.register('sw2.js').then((registration) => {
	                 console.log(`ServiceWorker registration successful with scope: ${registration.scope}`);
	                 const ctrl = navigator.serviceWorker.controller;
	                 const { post1, post2 } = new MessageChannel();
	                 
	                 post1.onmessge = event => {
	                 	document.getElementById('test').textContent = event.data;
	                 };
	                 ctrl.postMessage({ type: 'office' },[ post2 ]);
	                 while(true){
	                 	ctrl.postMessage({ type: '++'});
	                 }
	             })
	             .catch(console.error.bind(console));
		}
	</script>
</head>
<body>
	<div id="test"></p>
</body>
</html>